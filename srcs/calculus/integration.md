## 定积分
本章的标题叫做“微积分”，如果只讨论微分而不讨论积分无疑是不合理的。我们依然从一个实际的问题开始着手：

![Screenshot from 2021-10-11 22-01-58.png](https://i.loli.net/2021/10/11/wLXWT25OI6F7aPe.png)

我们如何求抛物线 $y = x^2, x = 2$ 以及x轴所围成的图形的面积？这不是一个常规的几何图形（如三角形，矩形或是圆形），所以我们没有现成的公式进行计算。
如果我们可以把这个图形切割为上面提到的这些图形的话，就能化简问题。

假定我们对面积的精度要求不是那么的高：

![Screenshot from 2021-10-11 22-05-57.png](https://i.loli.net/2021/10/11/KEwe96yGO4iajPC.png)

四边形ABCD作为一个不那么精确的近似，在某些情况下是可以被接受的（比如求两个面积的相对关系），但大部分情况下，我们希望精度能更高一些。
我们可以尝试用更多的矩形来填充这个区域：

![Screenshot from 2021-10-11 22-09-49.png](https://i.loli.net/2021/10/11/xBprJ3PLfsb6tqU.png)

很明显，空白的区域比起之前来小了不少。我们希望这样不断地添加矩形，直到他尽可能地铺满整个区域：

![Screenshot from 2021-10-11 22-14-46.png](https://i.loli.net/2021/10/11/jCMzuALVgUn6O3e.png)

我们离答案越来越接近了！可惜的是，我们并不能完美地用这些矩形填充这个区域，除非这些矩形足够**细小**，可以伸进这个区域的每一个角落。
而这恰恰是极限所擅长的。

我们假定每一个矩形的底边长度为 $d$ ，这样我们就可以写出图形面积的计算公式： $S = \sum d \times x_i^2 + \epsilon$ ，其中 $x_i$ 是每个矩形左下角点的横坐标。
之所以我们还需要加入一个 $\epsilon$ ，是因为这只是一个近似的结果，而这个结果是存在误差的。现在我们可以使用极限来代替这个 $\epsilon$ ： $S = \lim_{d \to 0} d \times x_i^2$ 。我们仍然不知道这个极限是否存在，如果存在的话收敛到哪里。从面积的定义来看：这是一个封闭的图形，所以这个极限一定会收敛到某个数。这个数我们称之为0到2上 $y = x^2$ 的积分，且该函数是可积的。我们使用一个新的符号： $\int_0^2x^2dx$ 来表示这个积分，其中 $\int$ 旁边的数字分别被称为积分上限和积分下限。

我们还没完成刚才的任务！我们给它取好了名字，找好了新的标记，但是却还没有完成计算！我们把式子换一个写法： $\lim_{n \to \infty} \sum_{i = 1}^n (x_i - x_{i - 1}) \times x_{i - 1}^2$ 。我们不再考虑让底边无限趋近于0,而是让分的份数变得足够多！
假定我们每次划分都是等长划分，那么上式可以写为： $\lim_{n \to \infty} \sum_{i = 0}^n \frac{2}{n} \times x_i^2 = \lim_{n \to \infty} \frac{2}{n} \sum_{i = 0}^n  x_i^2$ 。 此时我们需要将 $x_i$ 表示为一个具体的数值！由于我们是等距划分，我们可以认为 $x_i = x_{i - 1} + \frac{2}{n}, x_0 = 0$ 。
于是我们有： $\lim_{n \to \infty} \frac{2}{n} \sum_{i = 1}^n (\frac{2i}{n})^2 = \lim_{n \to \infty} \frac{8}{n^3} \sum_{i = 1}^n i^2$ 。
根据平方和公式，我们最终得到 $\lim_{n \to \infty} \frac{8}{n^3} \frac{n(n + 1)(2n + 1)}{6} = \lim_{n \to \infty} \frac{8n^3 + 12n^2 + 4n}{3n^3} = \frac{8}{3}$ 。

我们终于可以写下 $\int_0^2 x^2dx = \frac{8}{3}$ 。这是定积分中非常简单的一个例子。

根据上面的运算，我们可以很容易地得到如下的一些结论：

+ 如果 $a = b$ ,那么 $\int_a^b f(x)dx = 0$
+ 如果 $a < b < c$ ，那么 $\int_a^b f(x)dx + \int_b^c f(x)dx = \int_a^c f(x)dx$
+ 定积分是线性变换，也就是说 $\int_a^b (\alpha f(x) + \beta g(x))dx = \alpha\int_a^bf(x)dx + \beta\int_a^bg(x)dx$

> 你也许会好奇，为什么我们的矩形一定要这样竖着画。这种“画法”只是积分的一种形式，这种形式被称为黎曼积分。
> 常见的积分还有勒贝格积分，我们目前不会讨论这些积分，黎曼积分是我们的重点。

## 不定积分
相比定积分，不定积分与微分的关系更加紧密。不定积分也被称为**反导数** 。与定积分不同，在不定积分中我们不再指定积分的上下限。
如果 $F'(x) = f(x)$ ，那么 $\int f(x)dx = F(x) + C$ 。我们需要在 $F(x)$ 后加入一个常数 $C$ ，因为在求导的过程中，
常数的导数为 $0$ ，这部分不会保存在我们的导函数中。在不给任何其他信息的情况下，我们无法知道这个常数 $C$ 是多少。更确切地说，
不定积分求出的是一系列的函数。

根据求导的公式，我们可以总结出一些不定积分的公式：

+ $\int x^m dx = \frac{1}{m + 1}x^{m + 1} + C$
+ $\int \frac{1}{x}dx = ln|x| + C$
+ $\int e^xdx = e^x + C$
+ $\int a^xdx = \frac{a^x}{lna} + C$
+ $\int cosxdx = sinx + C$
+ $\int sinxdx = -cosx + C$
 
## 牛顿-莱布尼茨公式
你肯定已经厌倦了使用极限计算定积分了！如果能像不定积分一样，就能大大简化我们的运算。
事实上，我们可以使用牛顿-莱布尼茨公式（也叫做微积分第二基本定理）将定积分转化为不定积分的形式： $\int_a^b f(x)dx = F(b) - F(a)$ ，其中 $F(x)$ 是 $f(x)$ 的原函数。

我们从 $F(b) - F(a)$ 入手。我们假设存在序列 $a = x_0, x_1, \dots , x_n = b$ ，那么 $F(b) - F(a) = F(x_n) - F(x_0)$ 。
我们可以很容易地进行拆项： $F(b) - F(a) = F(x_n) - F(x_{n - 1}) + F(x_{n - 1}) - F(x_{n - 2}) + F(x_{n - 2}) - \dots - F(x_0)$ 。
整理上面这个式子，我们可以写为 $F(b) - F(a) = \sum_{i = 1}^{n}(F(x_i) - F(x_{i - 1}))$ 。

根据拉格郎日中值定理，我们有 $F'(\xi) = \frac{F(b) - F(a)}{b - a}$ 。所以对于每一个小项，我们有 $F(x_i) - F(x_{i - 1}) = F'(\xi_i)(x_i - x_{i - 1})$ 。
所以 $F(b) - F(a) = \sum_{i = 1}^{n}(F'(\xi_i)(x_i - x_{i - 1}))$ 。由于 $F(x)$ 是原函数，所以 $F(b) - F(a) = \sum_{i = 1}^{n}f(\xi_i)\Delta x_i)$ 。
此时只要对右式取极限，即可得到牛顿-莱布尼茨公式。

## 参考资料
+ [黎曼积分- 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E9%BB%8E%E6%9B%BC%E7%A7%AF%E5%88%86)
+ [微积分基本定理- 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E5%BE%AE%E7%A7%AF%E5%88%86%E5%9F%BA%E6%9C%AC%E5%AE%9A%E7%90%86)