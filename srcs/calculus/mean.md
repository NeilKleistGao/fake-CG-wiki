## 连续函数
我们喜欢连续的函数：这些函数往往会有很好的性质。当然，看起来连续对我们来说不够严谨，我们需要给连续性下一个更数学的定义。

函数连续要包含两个条件。在某个点c上，函数连续意味着：
+ 函数在该点的值存在
+ 函数无论以什么样的方式接近这个点，极限值都等于函数值

如果你认为上面的定义有些难以理解，我们来看几个例子。

![Screenshot from 2021-10-12 22-51-20.png](https://i.loli.net/2021/10/12/aLXd5cwJuig4mUn.png)

函数 $f(x) = x - 2, x \ne 4$ 是一个非常简单的函数，并且他不连续。这非常直观，因为他在 $x = 4$ 上是没有定义的，
或者说 $f(x)$ 在 $x = 4$ 上发生了**间断**。


![Screenshot from 2021-10-12 23-06-58.png](https://i.loli.net/2021/10/12/lQKI7CLixNbuteD.png)


这个分段函数显然也不连续。虽然我们在点 $x = 2$ 时函数值存在，但是如果我们从左边取极限， $lim_{x \to 2^-} f(x) = 4$ （我们用这样的符号来区分左右），但是 $lim_{x \to 2^+} f(x) = 8$ ，
也就是说 $f(x)$ 在 $x = 2$ 的时候发生了**跳跃**。
 
![Screenshot from 2021-10-12 23-15-16.png](https://i.loli.net/2021/10/12/fsxQJch9p568AmY.png)

经典的函数 $f(x) = \frac{1}{x}$ 同样也是不连续的：函数在 $x = 0$ 的时候不但不存在，而且左右两侧的极限也不一致。
特别的，左右两侧的极限在此时都趋于无穷（正无穷或负无穷），我们说此时函数在 $x = 0$ 时**逼近无限**。


![Screenshot from 2021-10-12 23-26-33.png](https://i.loli.net/2021/10/12/tjkIovJBDq62GnC.png)

这个函数的图像甚至让人怀疑是不是出了什么问题！但是没错，这是 $f(x) = sin(\frac{1}{x})$ 。由于 $sinx$ 是一个周期函数，在 $x \to 0$ 的过程中， $sin(\frac{1}{x})$ 不断重复他的周期，自然没法在一个确定的点停下来。所以这个函数在 $x = 0$ 的极限不存在，自然也不连续（虽然在图像上看起来是连续的，甚至连续成了一片区域！），我们称 $f(x)$ 在 $x = 0$ 处**震荡**。

## 介值定理
接下来的定理和连续有着密切的关系：一个连续函数定义在区间 $[a, b]$ 上，如果满足 $f(a), f(b)$ 中一个比 $u$ 大， 一个比 $u$ 小，那么存在至少一个点 $c, a < c < b$ ，
使得 $f(c) = u$ 。这就是著名的**介值定理**。
更通俗地说，介值定理指的是一个连续的函数可以穿过一条水平线，那么他们二者之间一定存在一个交点。

虽然这看起来非常显然，我们还是应该尝试着证明它。我们不妨先令 $f(a) < u < f(b)$  ，对于相反的情况我们可以用类似的方法处理。
我们可以找到一个点 $c$ ，使得对于任意的 $x \in [a, c]$ ，我们都有 $f(x) \le u$ ，且对于任意的 $c' > c$ ，都会存在某个 $x' \in (c, c']$ ，使得 $f(x') > u$ 。
这个 $c$ 被称为最小上界。最小上届是存在的，这依赖于实数的完备性（想象一个无限趋近于 $\sqrt 2$  的有理数数列，他的最小上界理论上就是 $\sqrt 2$  ，但这个数并不在有理数集中）。
我们接下来将证明： $c$ 就是我们要找的点。

由于我们没有确切的证据可以说明 $f(c) = u$ ，我们考虑使用反证。假定 $f(c) < u$ ，那么 $u - f(c) > 0$ 。 不妨令 $\epsilon = u - f(c)$ ，因为函数是连续的，所以函数极限存在，即存在一个 $\delta > 0$ ， 使得当 $|x - c| < \delta$ 时， $|f(x) - f(c)| < \epsilon = u - f(c)$ 。由于函数连续，所以左右极限都应该满足这个条件。那么对于 $x \in (c - \delta, c + \delta)$ ，都应该有 $|f(x) - f(c)| < u - f(c)$ 。我们令 $c' = c + \delta$ ，那么一定存在一个 $x'$ ，使得 $f(x') > u \ge f(c)$ 。
所以 $|f(x') - f(c)| = f(x') - f(c) < u - f(c)$ ，即 $f(x') < u$ ，显然与 $f(x') > u$ 矛盾。因此 $f(c) = u$ 。

当 $u = 0$ 时，这个定理还可以陈述为：如果一个连续函数同时存在一正一负两个取值，在这两个值之间至少存在一个根。

## 微分中值定理
### 罗尔中值定理
罗尔中值定理是三个中值定理中比较简单的一个。假定函数 $f(x)$ 满足如下条件：

+ 在区间 $[a, b]$ 上连续
+ 在区间 $(a, b)$ 上可导
+ $f(a) = f(b)$

那么，至少存在一个 $\xi \in (a, b)$ ，使得 $f'(\xi) = 0$ 。更通俗地说，如果一个连续函数两端的值相等，那么它必定经过了几段增减起伏，在增减交替的地方导函数为0。

如果函数的最大值和最小值都在 $a, b$ 上取到，那么这个函数就是常数函数，对于任意的 $x \in (a, b)$ ，都有 $f'(x) = 0$ 。

反之，一定有一个最大值（或者最小值）在 $(a, b)$ 上。我们来证明这个点的导函数一定为0。
我们以最大值为例。因为 $\xi$ 是最大值，所以 $\xi \ge f(x), x \in [a, b]$ 。分两侧讨论：

+ 当 $x \in (a, \xi)$ 时， $\frac{f(x) - f(\xi)}{x - \xi} \ge 0$ ，所以 $\lim_{x \to \xi^{-}} \frac{f(x) - f(\xi)}{x - \xi} \ge 0$ 。因为函数连续，所以 $f'(\xi) \ge 0$ ;
+ 当 $x \in (\xi, b)$ 时， $\frac{f(x) - f(\xi)}{x - \xi} \le 0$ ，所以 $\lim_{x \to \xi^{+}} \frac{f(x) - f(\xi)}{x - \xi} \le 0$ 。同理 $f'(\xi) \le 0$

综上所述， $f'(\xi) = 0$ 。


### 拉格郎日中值定理
拉格郎日中值定理是最常提及和使用的中值定理。假定函数 $f(x)$ 满足如下的条件：

+ 在区间 $[a, b]$ 上连续
+ 在区间 $(a, b)$ 上可导

那么，存在 $\xi \in (a, b)$ ，使得 $f'(\xi) = \frac{f(b) - f(a)}{b - a}$ 。如果你令 $f(a) = f(b)$ ，那么拉格郎日中值定理就会退化为罗尔定理。
这个定理所陈述的是：一个连续函数两个端点连线的斜率和函数中某个点的切线平行：

![Screenshot from 2021-10-16 12-46-38.png](https://i.loli.net/2021/10/16/bjaQTPmVE8vdCf7.png)

我们希望使用罗尔定理来证明拉格郎日定理。可惜， $f(a) \ne f(b)$ 。为此，我们需要构造一个新的函数 $g(x)$ 。
我们先按照设想写下这些步骤。根据罗尔定理： $g(a) = g(b)$ ，所以 存在 $\xi \in (a, b)$ ，使得 $g'(\xi) = 0$ 。（中间略），即 $f'(\xi) - \frac{f(b) - f(a)}{b - a} = 0$ 。 Q.E.D。这就是我们希望的证明过程了，我们需要根据这个过程补完 $g(x)$ 的定义。我们如果令 $g(x) = f(x) - \frac{f(b) - f(a)}{b - a}x + c$ ，可以发现这个函数的导函数确实是我们所要的（ $c$ 为常数）。此时我们只剩下一个条件需要满足： $g(a) = g(b)$ ，带入后得到 $f(a) - \frac{af(b) - af(a)}{b - a} + c = f(b) - \frac{bf(b) - bf(a)}{b - a} + c$  ，也就是 $bf(a) -af(a) - af(b) + af(a) = bf(b) - af(b) - bf(b) + bf(a)$ ，你很容易可以验证这个式子是正确的。由于 $c$ 和式子完全无关，我们不妨认为它是0。

好的，我们重新整理一下证明过程。根据罗尔定理： $g(a) = g(b)$ ，所以 存在 $\xi \in (a, b)$ ，使得 $g'(\xi) = 0$ 。所以 $(f(x) - \frac{f(b) - f(a)}{b - a}x)' = 0$，即 $f'(\xi) - \frac{f(b) - f(a)}{b - a} = 0$ 。 整理得 $f'(\xi) = \frac{f(b) - f(a)}{b - a}$ 。证毕。

### 柯西中值定理
最后，我们讨论柯西中值定理（也叫扩展中值定理），也是最一般的中值定理。假定函数 $f(x)$ 和 $g(x)$ 均满足如下的条件：

+ 在区间 $[a, b]$ 上连续
+ 在区间 $(a, b)$ 上可微

那么存在某个 $\xi \in (a, b)$ ，使得 $g'(\xi)(f(b) - f(a)) = f'(\xi)(g(b) - g(a))$ 。如果 $g(a) \ne g(b)$ 且 $g'(\xi) \ne 0$ ，
我们可以写为更常见的形式： $\frac{f'(\xi)}{g'(\xi)} = \frac{f(b) - f(a)}{g(b) - g(a)}$ 。如果令 $g(x) = x$ ，我们就可以得到拉格郎日中值定理。

同样的，我们希望使用之前的定理来证明柯西中值定理。我们不能将两个函数分别使用拉格郎日定理，
因为这样会产生两个变量 $\xi_1, \xi_2$ ，而我们无法证明他们相等。

由于式子中的 $f(b) - f(a)$ 和 $g(b) - g(a)$ 均为常数，我们很容易想到构造出 $h(x) = (f(b) - f(a))g(x) - (g(b) - g(a))f(x)$ 的函数。更重要的是：

+ $h(a) = f(b)g(a) - f(a)g(a) - f(a)g(b) + f(a)g(a) = f(b)g(a) - f(a)g(b)$
+ $h(b) = f(b)g(b) - f(a)g(b) - f(b)g(b) + f(b)g(a) = f(b)g(a) - f(a)g(b)$

由于二者相等，我们使用罗尔定理： $h'(\xi) = (f(b) - f(a))g'(\xi) - (g(b) - g(a))f'(\xi) = 0$ ，我们的结论非常轻松地得证了。


## 参考资料
+ [连续函数- 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E8%BF%9E%E7%BB%AD%E5%87%BD%E6%95%B0)
+ [介值定理- 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E4%BB%8B%E5%80%BC%E5%AE%9A%E7%90%86)
+ [中值定理- 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%80%BC%E5%AE%9A%E7%90%86)
