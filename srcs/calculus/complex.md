## 实数、虚数和复数
我们在之前的推导中看到了如何从自然数出发，导出我们现在常用的几大数系。但是事情还没有结束。因为我们没有处理这个问题： $\sqrt {-1}$ 是多少？

你的小学或中学老师会告诉你这是错的，因为根号运算下面的数字必须是非负的。但这只是局限于实数中的真理：

![Screenshot from 2021-10-17 10-25-20.png](https://i.loli.net/2021/10/17/MeDW2N54Q8Tid1G.png)

这是实数数轴上的数字5。数轴是一个一维的结构，这意味着我们只能对点进行平移和缩放（也就是线性代数中的线性组合）。
对一个点进行平移时使用加法（如 $7 = 5 + 2$ ，我们可以理解为我把5这个数字平移了2格，来到了7的位置），
而对一个点进行缩放的时候使用乘法（如 $10 = 5 \times 2$ ，我们可以理解为我把5拉伸为原来的两倍，来到10的位置）。

如果缩放的过程所使用的数字是一个负数，我们通常会将步骤拆分为两步。以 $5 \times (-2)$ 为例：

+ 首先计算 $5 \times 2 = 10$ ，即先完成缩放操作
+ 再计算 $10 \times (-1) = -10$ ，这个操作我们将它“翻译”为翻转，也就是改变它在数轴上相对0（也就是原点）的位置。我们也可以认为他是进行了一个180度的大旋转。

到现在，我们再回过头来讨论“ $\sqrt {-1}$ 是多少？”这件事。我们将根号拿掉，换成一个我们更喜欢的形式： $(-1)^{0.5}$ 。这里的 $0.5$ 次方，
我们不妨认为他包含着某个运算“只计算一半”的意义（就像 $5 + 4 \times 0.5 = 7$ ，本来我们应该平移4个单位，但因为0.5的存在，我们其实只做了一半，即平移了2个单位）。

我们再来看 $5 \times (-1)$ 这个操作，这个操作意味着我们要将5旋转180度，到达-5的位置。如果我们将式子改写为 $5 \times (-1)^0.5$ ，
我们是否可以理解为：**我们将这个数只旋转90度**？

![Screenshot from 2021-10-17 10-39-22.png](https://i.loli.net/2021/10/17/y3gICqnaKrN6Gpx.png)

由于90度根本就不存在于数轴上，我们需要将视野扩展到二维的平面。此时，点B的数值可以被我们写为 $5\sqrt {-1}$ ，这意味着我们为 $\sqrt {-1}$ 找到了一个属于自己的位置！
我们不妨为它取一个新的符号 $i = \sqrt{-1}$ （i为image的首字母），并将原来的数轴称为实轴，将新的这个数轴称为虚轴，虚轴上的数字我们称为虚数。

> 我们不打算在这里引入过多的群论的内容，如果你对这些内容感兴趣（事实上他们确实很有意思！），请参见参考资料

此时，我们可以将整个平面内的数字表示为一个点：

![Screenshot from 2021-10-17 10-45-07.png](https://i.loli.net/2021/10/17/c6WGhSgUbF7TXns.png)

每个点表示为 $(R, I)$ 或者 $R + I$ （其中R表示real，实部；I表示Image，虚部）的形式。这样的数字是实数和虚数的复合，我们称之为复数。

## 复数基本运算
### 共扼和模长
复数一个非常重要的运算是他的**共扼**，没有共扼很多其他的运算将无法实现。一个附属 $z = a + bi$ 的共扼 $\bar z$ 只需要将虚部取反 $\bar z = a - bi$ 。
在图像上，一个复数的共扼等同于其关于实轴的对称点。

为什么共扼如此重要？假如你尝试计算一下 $z\bar z$ ，你会得到 $a^2 + b^2$ 。这不仅给我们提供了从复数到实数的转换方式，
而且还给我们提供了一个全新的拆项思路： $a^2 + b^2 = (a + bi)(a - bi)$ 。

除此以外，我们还可以借助共扼计算复数的“长度” $|z| = \sqrt {z\bar z}$ 。一个复数的模长表示了它到原点的距离，如果我们将两个复数相减再取模，将会得到复平面内两个点的距离。

### 四则运算
复数之间也可以使用与实数相似的四则运算，并且得到的数字依然是复数：

+ 加法： $(a + bi) + (c + di) = (a + b) + (c + d)i$
+ 减法： $(a + bi) - (c + di) = (a - b) + (c - d)i$
+ 乘法： $(a + bi) \times (c + di) = ac + adi + cbi + bdi^2 = (ac - bd) + (ad + bc)i$
+ 除法： $\frac{a + bi}{c + di} = \frac{(a + bi)(c - di)}{(c + di)(c - di)} = \frac{(ac + bd) + (bc - ad)i}{c^2 + d^2}$

其中除法相对特殊：我们希望 $i$ 只出现在分子上而不是分母上，所以我们需要进行一步“分母实数化”（类似于我们不希望在分母中看到无理数时进行的分母有理化）。

## 矩阵表示和棣莫弗公式
复数还可以写为矩阵形式：

$$
a + bi = 
\begin{bmatrix}
a & -b \\
b & a
\end{bmatrix}
$$

为什么能这么写呢？我们尝试在复平面上画个圆：

![Screenshot from 2021-10-17 12-49-47.png](https://i.loli.net/2021/10/17/nkY3sASuNFX4hWe.png)

这是一个单位圆。我们在其中找到一个点，并且假设它和原点的连线与实轴的夹角为 $\theta$ 。
如果我们希望将一个向量在空间中旋转 $\theta$ 角度，我们很容易可以写出他的旋转矩阵：

$$
\begin{bmatrix}
cos\theta & -sin\theta \\
sin\theta & cos\theta
\end{bmatrix}
$$

我们不难发现： $a = cos\theta, b = sin\theta$ 。于是，我们可以将复数写成矩阵的形式了。

如果我们希望一口气旋转n次（n不必是整数，比如我可能希望旋转3次，再旋转“半次”，此时 $n = 3.5$），此时我们所旋转的角度就变为了 $n\theta$ 。
当然，我们也可以将这些旋转矩阵拆开，一次一次地乘。所以我们可以非常直观地得到这个公式：

$$
\begin{bmatrix}
cos\theta & -sin\theta \\
sin\theta & cos\theta
\end{bmatrix}^n = 
\begin{bmatrix}
cosn\theta & -sinn\theta \\
sinn\theta & cosn\theta
\end{bmatrix}
$$

将其转换为复数的形式，那么我们将会得到： $(cos\theta + isin\theta)^n  = cosn\theta + isinn\theta$ 。这就是著名的棣莫弗公式。

> 这是一个非正式的证明，他非常直观。但如果你希望看到更系统的证明，请阅读参考资料

## 欧拉公式
欧拉公式又称为**上帝公式**，他将 $0, 1, \pi, e, i$ 有机地结合在了一起： $e^{i\pi} + 1 = 0$ 。

初见这个公式，你肯定会感到惊讶！事实上欧拉公式更通用的形式是这样： $e^{ix} = cosx + isinx$ 。

首先，我们需要定义复数域上的 $e^x$ ： 对于 $c = a + bi$ ，有 $e^c = \lim_{n \to \infty} (1 + \frac{c}{n})^n$ 。这和实数上大体是相同的。
根据上面的棣莫弗公式，我们可以得到极限内的式子等于 $(1 + \frac{a + bi}{n})^n = ((1 + \frac{a}{n}) + i\frac{b}{n})^n = r_n(cos\theta_n + isin\theta_n)$ 。
其中 $r_n = ((1 + \frac{a}{n})^2 + \frac{b}{n}^2)^{\frac{n}{2}}, \theta_n = narctan\frac{\frac{b}{n}}{1 + \frac{a}{n}}$ 。

我们对 $r_n$ 和 $\theta_n$ 分别求极限。对于 $r_n$ ，我们希望把那个恼人的 $\frac{n}{2}$ 拿下来。
所以取自然对数： $\lim_{n \to \infty} lnr_n = \lim_{n \to \infty} \frac{n}{2}ln((1 + \frac{a}{n})^2 + \frac{b}{n}^2)$ 。
由于 $\lim_{n \to \infty} \frac{1}{n} = 0$ ，由经典的等价无穷小，上式可以转化为 $\lim_{n \to \infty} \frac{n}{2}(\frac{2a}{n} + \frac{a^2 + b^2}{n^2}) = a$ 。

同时，另一边 $\lim_{n \to \infty} \theta_n = \lim_{n \to \infty} narctan\frac{\frac{b}{n}}{1 + \frac{a}{n}}$ 。和上面一样，我们这次借助这两个函数的关系：

![Screenshot from 2021-10-17 13-17-59.png](https://i.loli.net/2021/10/17/kSHc75bCRguxKer.png)

在接近0的地方， $arctanx$ 和 $x$ 是近似等价的。对原来的式子i进行替换： $\lim_{n \to \infty} \theta_n = \lim_{n \to \infty} n\frac{\frac{b}{n}}{1 + \frac{a}{n}} = b$ 。

于是，我们将两个极限整合在一起： $\lim_{n \to \infty} r_n(cos\theta_n + isin\theta_n) = e^a(cosb + isinb)$ 。
此时，我们令 $a = 0$ ，最终得到 $e^{ix} = cosx + sinx$ 。

这将是我们连接三角函数与复函数之间非常重要的桥梁。

## 参考资料
+ [【官方双语】欧拉公式与初等群论](https://www.bilibili.com/video/BV1fx41187tZ?spm_id_from=333.999.0.0)
+ [复数(数学) - 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E5%A4%8D%E6%95%B0_(%E6%95%B0%E5%AD%A6))
+ [棣莫弗公式 - 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E6%A3%A3%E8%8E%AB%E5%BC%97%E5%85%AC%E5%BC%8F)